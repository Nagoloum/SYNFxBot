[
    {
        "label": "os",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "os",
        "description": "os",
        "detail": "os",
        "documentation": {}
    },
    {
        "label": "load_dotenv",
        "importPath": "dotenv",
        "description": "dotenv",
        "isExtraImport": true,
        "detail": "dotenv",
        "documentation": {}
    },
    {
        "label": "load_dotenv",
        "importPath": "dotenv",
        "description": "dotenv",
        "isExtraImport": true,
        "detail": "dotenv",
        "documentation": {}
    },
    {
        "label": "load_dotenv",
        "importPath": "dotenv",
        "description": "dotenv",
        "isExtraImport": true,
        "detail": "dotenv",
        "documentation": {}
    },
    {
        "label": "AccountConfig",
        "importPath": "multi_account",
        "description": "multi_account",
        "isExtraImport": true,
        "detail": "multi_account",
        "documentation": {}
    },
    {
        "label": "streamlit",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "streamlit",
        "description": "streamlit",
        "detail": "streamlit",
        "documentation": {}
    },
    {
        "label": "st_autorefresh",
        "importPath": "streamlit_autorefresh",
        "description": "streamlit_autorefresh",
        "isExtraImport": true,
        "detail": "streamlit_autorefresh",
        "documentation": {}
    },
    {
        "label": "pandas",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "pandas",
        "description": "pandas",
        "detail": "pandas",
        "documentation": {}
    },
    {
        "label": "plotly.express",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "plotly.express",
        "description": "plotly.express",
        "detail": "plotly.express",
        "documentation": {}
    },
    {
        "label": "plotly.graph_objects",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "plotly.graph_objects",
        "description": "plotly.graph_objects",
        "detail": "plotly.graph_objects",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "timedelta",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "timedelta",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "MongoClient",
        "importPath": "pymongo",
        "description": "pymongo",
        "isExtraImport": true,
        "detail": "pymongo",
        "documentation": {}
    },
    {
        "label": "MongoClient",
        "importPath": "pymongo",
        "description": "pymongo",
        "isExtraImport": true,
        "detail": "pymongo",
        "documentation": {}
    },
    {
        "label": "ACCOUNTS",
        "importPath": "accounts_config",
        "description": "accounts_config",
        "isExtraImport": true,
        "detail": "accounts_config",
        "documentation": {}
    },
    {
        "label": "ACCOUNTS",
        "importPath": "accounts_config",
        "description": "accounts_config",
        "isExtraImport": true,
        "detail": "accounts_config",
        "documentation": {}
    },
    {
        "label": "MetaTrader5",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "MetaTrader5",
        "description": "MetaTrader5",
        "detail": "MetaTrader5",
        "documentation": {}
    },
    {
        "label": "logging",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "logging",
        "description": "logging",
        "detail": "logging",
        "documentation": {}
    },
    {
        "label": "time",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "time",
        "description": "time",
        "detail": "time",
        "documentation": {}
    },
    {
        "label": "ACCOUNT_NUMBER",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "PASSWORD",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "SERVER",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "MT5_TERMINAL_PATH",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "MONGODB_URI",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "DB_NAME",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "COLLECTION_NAME",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "SYMBOL",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "ACCOUNT_NUMBER",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "SYMBOL",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "MAGIC_NUMBER",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "ACCOUNT_NUMBER",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "MAGIC_NUMBER",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "TELEGRAM_TOKEN",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "TELEGRAM_CHAT_ID",
        "importPath": "config",
        "description": "config",
        "isExtraImport": true,
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "send_telegram_alert",
        "importPath": "utils",
        "description": "utils",
        "isExtraImport": true,
        "detail": "utils",
        "documentation": {}
    },
    {
        "label": "setup_logging",
        "importPath": "utils",
        "description": "utils",
        "isExtraImport": true,
        "detail": "utils",
        "documentation": {}
    },
    {
        "label": "send_telegram_alert",
        "importPath": "utils",
        "description": "utils",
        "isExtraImport": true,
        "detail": "utils",
        "documentation": {}
    },
    {
        "label": "init_db",
        "importPath": "database",
        "description": "database",
        "isExtraImport": true,
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "save_open",
        "importPath": "database",
        "description": "database",
        "isExtraImport": true,
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "save_open",
        "importPath": "database",
        "description": "database",
        "isExtraImport": true,
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "save_close",
        "importPath": "database",
        "description": "database",
        "isExtraImport": true,
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "save_close",
        "importPath": "database",
        "description": "database",
        "isExtraImport": true,
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "save_open",
        "importPath": "database",
        "description": "database",
        "isExtraImport": true,
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "connect_to_mt5",
        "importPath": "connexion",
        "description": "connexion",
        "isExtraImport": true,
        "detail": "connexion",
        "documentation": {}
    },
    {
        "label": "disconnect",
        "importPath": "connexion",
        "description": "connexion",
        "isExtraImport": true,
        "detail": "connexion",
        "documentation": {}
    },
    {
        "label": "threading",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "threading",
        "description": "threading",
        "detail": "threading",
        "documentation": {}
    },
    {
        "label": "get_smart_signal",
        "importPath": "strategy",
        "description": "strategy",
        "isExtraImport": true,
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "monitor_active_trade",
        "importPath": "strategy",
        "description": "strategy",
        "isExtraImport": true,
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "is_volatility_good",
        "importPath": "strategy",
        "description": "strategy",
        "isExtraImport": true,
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "open_trade",
        "importPath": "strategy",
        "description": "strategy",
        "isExtraImport": true,
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "prepare_trade_request",
        "importPath": "strategy",
        "description": "strategy",
        "isExtraImport": true,
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "Dict",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "List",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "Optional",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "dataclass",
        "importPath": "dataclasses",
        "description": "dataclasses",
        "isExtraImport": true,
        "detail": "dataclasses",
        "documentation": {}
    },
    {
        "label": "pandas_ta",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "pandas_ta",
        "description": "pandas_ta",
        "detail": "pandas_ta",
        "documentation": {}
    },
    {
        "label": "numpy",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "numpy",
        "description": "numpy",
        "detail": "numpy",
        "documentation": {}
    },
    {
        "label": "sys",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "sys",
        "description": "sys",
        "detail": "sys",
        "documentation": {}
    },
    {
        "label": "asyncio",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "asyncio",
        "description": "asyncio",
        "detail": "asyncio",
        "documentation": {}
    },
    {
        "label": "Bot",
        "importPath": "telegram",
        "description": "telegram",
        "isExtraImport": true,
        "detail": "telegram",
        "documentation": {}
    },
    {
        "label": "ACCOUNTS",
        "kind": 5,
        "importPath": "accounts_config",
        "description": "accounts_config",
        "peekOfCode": "ACCOUNTS = [\n    # Compte Principal (charg√© depuis .env pour compatibilit√©)\n    AccountConfig(\n        account_number=int(os.getenv(\"ACCOUNT_NUMBER\", \"0\")),\n        password=os.getenv(\"PASSWORD\", \"\"),\n        server=os.getenv(\"SERVER\", \"Deriv-Server\"),\n        name=\"Compte Principal\",\n        risk_multiplier=1.0,\n        enabled=True\n    ),",
        "detail": "accounts_config",
        "documentation": {}
    },
    {
        "label": "get_mongo_client",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def get_mongo_client():\n    uri = os.getenv(\"MONGODB_URI\")\n    return MongoClient(uri, serverSelectionTimeoutMS=5000)\ndef get_account_db(client, account_number):\n    db_name = f\"trading_bot_{account_number}\"\n    return client[db_name]\ndef load_data(client, account_number, market_filter=\"Tous\"):\n    db = get_account_db(client, account_number)\n    collections = db.list_collection_names()\n    all_trades = []",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "get_account_db",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def get_account_db(client, account_number):\n    db_name = f\"trading_bot_{account_number}\"\n    return client[db_name]\ndef load_data(client, account_number, market_filter=\"Tous\"):\n    db = get_account_db(client, account_number)\n    collections = db.list_collection_names()\n    all_trades = []\n    for col_name in collections:\n        # Si on filtre par march√©\n        if market_filter != \"Tous\" and col_name != market_filter:",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "load_data",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def load_data(client, account_number, market_filter=\"Tous\"):\n    db = get_account_db(client, account_number)\n    collections = db.list_collection_names()\n    all_trades = []\n    for col_name in collections:\n        # Si on filtre par march√©\n        if market_filter != \"Tous\" and col_name != market_filter:\n            continue\n        col = db[col_name]\n        trades = list(col.find().sort(\"open_time\", -1))",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "df_raw",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "df_raw = load_data(client, selected_account_id, selected_market)\nif df_raw.empty:\n    st.warning(\"Aucune donn√©e trouv√©e pour ce compte/march√©.\")\n    st.stop()\n# Filtrage Temporel\ndf = df_raw.copy()\nnow = datetime.now()\nif periode == \"Aujourd'hui\":\n    start_date = now.replace(hour=0, minute=0, second=0, microsecond=0)\n    df = df[df[\"open_time\"] >= start_date]",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "df",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "df = df_raw.copy()\nnow = datetime.now()\nif periode == \"Aujourd'hui\":\n    start_date = now.replace(hour=0, minute=0, second=0, microsecond=0)\n    df = df[df[\"open_time\"] >= start_date]\nelif periode == \"Hier\":\n    start_date = (now - timedelta(days=1)).replace(hour=0, minute=0, second=0, microsecond=0)\n    end_date = now.replace(hour=0, minute=0, second=0, microsecond=0)\n    df = df[(df[\"open_time\"] >= start_date) & (df[\"open_time\"] < end_date)]\nelif periode == \"Cette Semaine\":",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "now",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "now = datetime.now()\nif periode == \"Aujourd'hui\":\n    start_date = now.replace(hour=0, minute=0, second=0, microsecond=0)\n    df = df[df[\"open_time\"] >= start_date]\nelif periode == \"Hier\":\n    start_date = (now - timedelta(days=1)).replace(hour=0, minute=0, second=0, microsecond=0)\n    end_date = now.replace(hour=0, minute=0, second=0, microsecond=0)\n    df = df[(df[\"open_time\"] >= start_date) & (df[\"open_time\"] < end_date)]\nelif periode == \"Cette Semaine\":\n    start_date = now - timedelta(days=now.weekday()) # Lundi",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "total_trades",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "total_trades = len(df)\nclosed_trades = df[df[\"status\"] == \"CLOSED\"]\nwins = len(closed_trades[closed_trades[\"profit\"] > 0])\nlosses = len(closed_trades[closed_trades[\"profit\"] < 0])\nwin_rate = (wins / len(closed_trades) * 100) if len(closed_trades) > 0 else 0\ntotal_profit = closed_trades[\"profit\"].sum()\ncol1.metric(\"Total Trades\", total_trades)\ncol2.metric(\"Win Rate\", f\"{win_rate:.1f}%\")\ncol3.metric(\"Profit Net\", f\"{total_profit:.2f} $\", delta_color=\"normal\")\ncol4.metric(\"Facteur de Profit\", f\"{(wins/losses if losses > 0 else wins):.2f}\")",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "closed_trades",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "closed_trades = df[df[\"status\"] == \"CLOSED\"]\nwins = len(closed_trades[closed_trades[\"profit\"] > 0])\nlosses = len(closed_trades[closed_trades[\"profit\"] < 0])\nwin_rate = (wins / len(closed_trades) * 100) if len(closed_trades) > 0 else 0\ntotal_profit = closed_trades[\"profit\"].sum()\ncol1.metric(\"Total Trades\", total_trades)\ncol2.metric(\"Win Rate\", f\"{win_rate:.1f}%\")\ncol3.metric(\"Profit Net\", f\"{total_profit:.2f} $\", delta_color=\"normal\")\ncol4.metric(\"Facteur de Profit\", f\"{(wins/losses if losses > 0 else wins):.2f}\")\n# --- GRAPHIQUES ---",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "wins",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "wins = len(closed_trades[closed_trades[\"profit\"] > 0])\nlosses = len(closed_trades[closed_trades[\"profit\"] < 0])\nwin_rate = (wins / len(closed_trades) * 100) if len(closed_trades) > 0 else 0\ntotal_profit = closed_trades[\"profit\"].sum()\ncol1.metric(\"Total Trades\", total_trades)\ncol2.metric(\"Win Rate\", f\"{win_rate:.1f}%\")\ncol3.metric(\"Profit Net\", f\"{total_profit:.2f} $\", delta_color=\"normal\")\ncol4.metric(\"Facteur de Profit\", f\"{(wins/losses if losses > 0 else wins):.2f}\")\n# --- GRAPHIQUES ---\n# 1. Courbe d'√©volution du capital (Cumulatif)",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "losses",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "losses = len(closed_trades[closed_trades[\"profit\"] < 0])\nwin_rate = (wins / len(closed_trades) * 100) if len(closed_trades) > 0 else 0\ntotal_profit = closed_trades[\"profit\"].sum()\ncol1.metric(\"Total Trades\", total_trades)\ncol2.metric(\"Win Rate\", f\"{win_rate:.1f}%\")\ncol3.metric(\"Profit Net\", f\"{total_profit:.2f} $\", delta_color=\"normal\")\ncol4.metric(\"Facteur de Profit\", f\"{(wins/losses if losses > 0 else wins):.2f}\")\n# --- GRAPHIQUES ---\n# 1. Courbe d'√©volution du capital (Cumulatif)\nif not closed_trades.empty:",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "win_rate",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "win_rate = (wins / len(closed_trades) * 100) if len(closed_trades) > 0 else 0\ntotal_profit = closed_trades[\"profit\"].sum()\ncol1.metric(\"Total Trades\", total_trades)\ncol2.metric(\"Win Rate\", f\"{win_rate:.1f}%\")\ncol3.metric(\"Profit Net\", f\"{total_profit:.2f} $\", delta_color=\"normal\")\ncol4.metric(\"Facteur de Profit\", f\"{(wins/losses if losses > 0 else wins):.2f}\")\n# --- GRAPHIQUES ---\n# 1. Courbe d'√©volution du capital (Cumulatif)\nif not closed_trades.empty:\n    closed_trades = closed_trades.sort_values(\"close_time\")",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "total_profit",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "total_profit = closed_trades[\"profit\"].sum()\ncol1.metric(\"Total Trades\", total_trades)\ncol2.metric(\"Win Rate\", f\"{win_rate:.1f}%\")\ncol3.metric(\"Profit Net\", f\"{total_profit:.2f} $\", delta_color=\"normal\")\ncol4.metric(\"Facteur de Profit\", f\"{(wins/losses if losses > 0 else wins):.2f}\")\n# --- GRAPHIQUES ---\n# 1. Courbe d'√©volution du capital (Cumulatif)\nif not closed_trades.empty:\n    closed_trades = closed_trades.sort_values(\"close_time\")\n    closed_trades[\"cum_profit\"] = closed_trades[\"profit\"].cumsum()",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "display_cols",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "display_cols = [\"ticket\", \"market\", \"type\", \"open_time\", \"open_price\", \"close_time\", \"close_price\", \"profit\", \"status\"]\n# Filtrer les colonnes qui existent vraiment\nfinal_cols = [c for c in display_cols if c in df.columns]\nst.dataframe(\n    df[final_cols].sort_values(\"open_time\", ascending=False),\n    use_container_width=True\n)",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "final_cols",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "final_cols = [c for c in display_cols if c in df.columns]\nst.dataframe(\n    df[final_cols].sort_values(\"open_time\", ascending=False),\n    use_container_width=True\n)",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "ACCOUNT_NUMBER",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "ACCOUNT_NUMBER = int(os.getenv(\"ACCOUNT_NUMBER\", \"0\"))\nPASSWORD = os.getenv(\"PASSWORD\", \"\")\nSERVER = os.getenv(\"SERVER\", \"\")\nMT5_TERMINAL_PATH = r\"C:\\Program Files\\MetaTrader 5\\terminal64.exe\"\n# Uniquement V100\nSYMBOL = [\"Volatility 25 Index\", \"Volatility 50 Index\", \"Volatility 75 Index\", \"Volatility 100 Index\"]\nLOT_SIZE = 1.0  # Volume fixe pour le test\nMAGIC_NUMBER = 123456\n# Telegram\nTELEGRAM_TOKEN = os.getenv(\"TELEGRAM_TOKEN\", \"\")",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "PASSWORD",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "PASSWORD = os.getenv(\"PASSWORD\", \"\")\nSERVER = os.getenv(\"SERVER\", \"\")\nMT5_TERMINAL_PATH = r\"C:\\Program Files\\MetaTrader 5\\terminal64.exe\"\n# Uniquement V100\nSYMBOL = [\"Volatility 25 Index\", \"Volatility 50 Index\", \"Volatility 75 Index\", \"Volatility 100 Index\"]\nLOT_SIZE = 1.0  # Volume fixe pour le test\nMAGIC_NUMBER = 123456\n# Telegram\nTELEGRAM_TOKEN = os.getenv(\"TELEGRAM_TOKEN\", \"\")\nTELEGRAM_CHAT_ID = os.getenv(\"TELEGRAM_CHAT_ID\", \"\")",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "SERVER",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "SERVER = os.getenv(\"SERVER\", \"\")\nMT5_TERMINAL_PATH = r\"C:\\Program Files\\MetaTrader 5\\terminal64.exe\"\n# Uniquement V100\nSYMBOL = [\"Volatility 25 Index\", \"Volatility 50 Index\", \"Volatility 75 Index\", \"Volatility 100 Index\"]\nLOT_SIZE = 1.0  # Volume fixe pour le test\nMAGIC_NUMBER = 123456\n# Telegram\nTELEGRAM_TOKEN = os.getenv(\"TELEGRAM_TOKEN\", \"\")\nTELEGRAM_CHAT_ID = os.getenv(\"TELEGRAM_CHAT_ID\", \"\")\n# MongoDB",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "MT5_TERMINAL_PATH",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "MT5_TERMINAL_PATH = r\"C:\\Program Files\\MetaTrader 5\\terminal64.exe\"\n# Uniquement V100\nSYMBOL = [\"Volatility 25 Index\", \"Volatility 50 Index\", \"Volatility 75 Index\", \"Volatility 100 Index\"]\nLOT_SIZE = 1.0  # Volume fixe pour le test\nMAGIC_NUMBER = 123456\n# Telegram\nTELEGRAM_TOKEN = os.getenv(\"TELEGRAM_TOKEN\", \"\")\nTELEGRAM_CHAT_ID = os.getenv(\"TELEGRAM_CHAT_ID\", \"\")\n# MongoDB\nMONGODB_URI = os.getenv(\"MONGODB_URI\", \"\")",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "SYMBOL",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "SYMBOL = [\"Volatility 25 Index\", \"Volatility 50 Index\", \"Volatility 75 Index\", \"Volatility 100 Index\"]\nLOT_SIZE = 1.0  # Volume fixe pour le test\nMAGIC_NUMBER = 123456\n# Telegram\nTELEGRAM_TOKEN = os.getenv(\"TELEGRAM_TOKEN\", \"\")\nTELEGRAM_CHAT_ID = os.getenv(\"TELEGRAM_CHAT_ID\", \"\")\n# MongoDB\nMONGODB_URI = os.getenv(\"MONGODB_URI\", \"\")\nDB_NAME = os.getenv(\"MONGODB_DB\", \"trading_bot_V100\")\nCOLLECTION_NAME = \"trades_v100\"",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "LOT_SIZE",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "LOT_SIZE = 1.0  # Volume fixe pour le test\nMAGIC_NUMBER = 123456\n# Telegram\nTELEGRAM_TOKEN = os.getenv(\"TELEGRAM_TOKEN\", \"\")\nTELEGRAM_CHAT_ID = os.getenv(\"TELEGRAM_CHAT_ID\", \"\")\n# MongoDB\nMONGODB_URI = os.getenv(\"MONGODB_URI\", \"\")\nDB_NAME = os.getenv(\"MONGODB_DB\", \"trading_bot_V100\")\nCOLLECTION_NAME = \"trades_v100\"",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "MAGIC_NUMBER",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "MAGIC_NUMBER = 123456\n# Telegram\nTELEGRAM_TOKEN = os.getenv(\"TELEGRAM_TOKEN\", \"\")\nTELEGRAM_CHAT_ID = os.getenv(\"TELEGRAM_CHAT_ID\", \"\")\n# MongoDB\nMONGODB_URI = os.getenv(\"MONGODB_URI\", \"\")\nDB_NAME = os.getenv(\"MONGODB_DB\", \"trading_bot_V100\")\nCOLLECTION_NAME = \"trades_v100\"",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "TELEGRAM_TOKEN",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "TELEGRAM_TOKEN = os.getenv(\"TELEGRAM_TOKEN\", \"\")\nTELEGRAM_CHAT_ID = os.getenv(\"TELEGRAM_CHAT_ID\", \"\")\n# MongoDB\nMONGODB_URI = os.getenv(\"MONGODB_URI\", \"\")\nDB_NAME = os.getenv(\"MONGODB_DB\", \"trading_bot_V100\")\nCOLLECTION_NAME = \"trades_v100\"",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "TELEGRAM_CHAT_ID",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "TELEGRAM_CHAT_ID = os.getenv(\"TELEGRAM_CHAT_ID\", \"\")\n# MongoDB\nMONGODB_URI = os.getenv(\"MONGODB_URI\", \"\")\nDB_NAME = os.getenv(\"MONGODB_DB\", \"trading_bot_V100\")\nCOLLECTION_NAME = \"trades_v100\"",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "MONGODB_URI",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "MONGODB_URI = os.getenv(\"MONGODB_URI\", \"\")\nDB_NAME = os.getenv(\"MONGODB_DB\", \"trading_bot_V100\")\nCOLLECTION_NAME = \"trades_v100\"",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "DB_NAME",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "DB_NAME = os.getenv(\"MONGODB_DB\", \"trading_bot_V100\")\nCOLLECTION_NAME = \"trades_v100\"",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "COLLECTION_NAME",
        "kind": 5,
        "importPath": "config",
        "description": "config",
        "peekOfCode": "COLLECTION_NAME = \"trades_v100\"",
        "detail": "config",
        "documentation": {}
    },
    {
        "label": "connect_to_mt5",
        "kind": 2,
        "importPath": "connexion",
        "description": "connexion",
        "peekOfCode": "def connect_to_mt5(max_retries=3, delay=5):\n    \"\"\"Connexion MT5 avec retries\"\"\"\n    terminal_path = MT5_TERMINAL_PATH\n    for attempt in range(1, max_retries + 1):\n        try:\n            if mt5.terminal_info():\n                mt5.shutdown()\n                time.sleep(1)\n            # logging.info(f\"Tentative connexion {attempt}/{max_retries}\")\n            if not mt5.initialize(path=terminal_path):",
        "detail": "connexion",
        "documentation": {}
    },
    {
        "label": "disconnect",
        "kind": 2,
        "importPath": "connexion",
        "description": "connexion",
        "peekOfCode": "def disconnect():\n    \"\"\"D√©connexion\"\"\"\n    try:\n        if mt5.terminal_info():\n            mt5.shutdown()\n        logging.info(\"Bot arr√™t√©\")\n        send_telegram_alert(\"üõë Bot arr√™t√©\", force=True)  # Alert close\n    except Exception as e:\n        logging.error(f\"Erreur d√©connexion : {e}\")",
        "detail": "connexion",
        "documentation": {}
    },
    {
        "label": "DatabaseManager",
        "kind": 6,
        "importPath": "database",
        "description": "database",
        "peekOfCode": "class DatabaseManager:\n    def __init__(self, uri):\n        self.client = MongoClient(uri, serverSelectionTimeoutMS=5000)\n        self.uri = uri\n    def get_db(self, account_number):\n        \"\"\"Retourne la base de donn√©es sp√©cifique au compte\"\"\"\n        # Nom de DB format√© : trading_bot_{account_number}\n        db_name = f\"trading_bot_{account_number}\"\n        return self.client[db_name]\n    def get_collection(self, account_number, symbol):",
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "init_db_manager",
        "kind": 2,
        "importPath": "database",
        "description": "database",
        "peekOfCode": "def init_db_manager():\n    global db_manager\n    try:\n        if db_manager is None:\n            db_manager = DatabaseManager(MONGODB_URI)\n            # logging.info(\"üíæ Database Manager : Initialis√©\")\n    except Exception as e:\n        logging.error(f\"‚ùå Erreur Init DB Manager : {e}\")\n# Fonctions de sauvegarde mises √† jour pour le multi-comptes\ndef save_open(account_number, symbol, ticket, type_trade, price):",
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "save_open",
        "kind": 2,
        "importPath": "database",
        "description": "database",
        "peekOfCode": "def save_open(account_number, symbol, ticket, type_trade, price):\n    \"\"\"Enregistre l'ouverture d'un trade dans la DB du compte sp√©cifique\"\"\"\n    init_db_manager()\n    if db_manager:\n        try:\n            col = db_manager.get_collection(account_number, symbol)\n            col.insert_one({\n                \"ticket\": ticket, \n                \"symbol\": symbol,\n                \"type\": type_trade, ",
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "save_close",
        "kind": 2,
        "importPath": "database",
        "description": "database",
        "peekOfCode": "def save_close(account_number, symbol, ticket, profit, price, status=\"CLOSED\"):\n    \"\"\"Enregistre la fermeture d'un trade\"\"\"\n    init_db_manager()\n    if db_manager:\n        try:\n            col = db_manager.get_collection(account_number, symbol)\n            col.update_one(\n                {\"ticket\": ticket},\n                {\"$set\": {\n                    \"close_price\": price, ",
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "init_db",
        "kind": 2,
        "importPath": "database",
        "description": "database",
        "peekOfCode": "def init_db():\n    init_db_manager()\n# Ces alias pointent vers une version \"dummy\" ou n√©cessitent d'√™tre mis √† jour dans strategy.py\n# On ne peut plus utiliser une variable globale 'collection' unique.\ncollection = None",
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "db_manager",
        "kind": 5,
        "importPath": "database",
        "description": "database",
        "peekOfCode": "db_manager = None\ndef init_db_manager():\n    global db_manager\n    try:\n        if db_manager is None:\n            db_manager = DatabaseManager(MONGODB_URI)\n            # logging.info(\"üíæ Database Manager : Initialis√©\")\n    except Exception as e:\n        logging.error(f\"‚ùå Erreur Init DB Manager : {e}\")\n# Fonctions de sauvegarde mises √† jour pour le multi-comptes",
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "collection",
        "kind": 5,
        "importPath": "database",
        "description": "database",
        "peekOfCode": "collection = None",
        "detail": "database",
        "documentation": {}
    },
    {
        "label": "get_account_number_for_monitoring",
        "kind": 2,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "def get_account_number_for_monitoring(multi_account_manager):\n    \"\"\"\n    Retourne le num√©ro de compte √† utiliser pour le monitoring.\n    En mode multi, retourne le premier compte actif.\n    \"\"\"\n    if multi_account_manager and MODE == \"MULTI\":\n        for acc in ACCOUNTS:\n            if acc.enabled:\n                return acc.account_number\n    return ACCOUNT_NUMBER",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "execute_trade_with_multi_account",
        "kind": 2,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "def execute_trade_with_multi_account(symbol, signal, multi_account_manager=None):\n    \"\"\"\n    Ex√©cute un trade en utilisant le syst√®me multi-comptes si disponible,\n    sinon utilise le syst√®me classique.\n    \"\"\"\n    if multi_account_manager and MODE == \"MULTI\":\n        request, lot, entry_price, tp1, tp2, tp3 = prepare_trade_request(symbol, signal)\n        if request is None:\n            return None, 0, None\n        results = multi_account_manager.execute_trade_all_accounts(request)",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "run_bot_for_symbol",
        "kind": 2,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "def run_bot_for_symbol(symbol, multi_account_manager=None):\n    \"\"\"\n    Boucle d'analyse ind√©pendante pour chaque indice\n    Args:\n        symbol: Symbole √† trader (ex: \"Volatility 100 Index\")\n        multi_account_manager: Gestionnaire multi-comptes (optionnel)\n    \"\"\"\n    logging.info(f\"üîç D√©marrage analyse | {symbol}\")\n    # Obtenir le num√©ro de compte pour le monitoring\n    account_number = get_account_number_for_monitoring(multi_account_manager)",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "AccountConfig",
        "kind": 6,
        "importPath": "multi_account",
        "description": "multi_account",
        "peekOfCode": "class AccountConfig:\n    \"\"\"Configuration d'un compte MT5\"\"\"\n    account_number: int\n    password: str\n    server: str\n    name: str = \"\"  # Nom optionnel pour identifier le compte\n    risk_multiplier: float = 1.0  # Multiplicateur de risque (ex: 0.5 = 50% du risque du compte ma√Ætre)\n    enabled: bool = True  # Activer/d√©sactiver ce compte\nclass MultiAccountManager:\n    \"\"\"",
        "detail": "multi_account",
        "documentation": {}
    },
    {
        "label": "MultiAccountManager",
        "kind": 6,
        "importPath": "multi_account",
        "description": "multi_account",
        "peekOfCode": "class MultiAccountManager:\n    \"\"\"\n    Gestionnaire de plusieurs comptes MT5.\n    Permet de :\n    - Se connecter √† plusieurs comptes\n    - Ex√©cuter des trades sur tous les comptes actifs\n    - G√©rer les risques individuellement par compte\n    \"\"\"\n    def __init__(self, accounts: List[AccountConfig]):\n        \"\"\"",
        "detail": "multi_account",
        "documentation": {}
    },
    {
        "label": "get_price_data",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def get_price_data(symbol, timeframe, bars=500):\n    \"\"\"R√©cup√®re les donn√©es de prix\"\"\"\n    try:\n        rates = mt5.copy_rates_from_pos(symbol, timeframe, 0, bars)\n        if rates is None or len(rates) == 0:\n            return pd.DataFrame()\n        df = pd.DataFrame(rates)\n        df['time'] = pd.to_datetime(df['time'], unit='s')\n        return df\n    except Exception as e:",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "get_dynamic_lot",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def get_dynamic_lot(symbol, entry_price, sl_price, risk_percent=RISK_PER_TRADE):\n    \"\"\"\n    Calcule le lot en fonction du risque autoris√©\n    Args:\n        symbol: Symbole trad√©\n        entry_price: Prix d'entr√©e\n        sl_price: Prix du Stop Loss\n        risk_percent: % du capital √† risquer\n    Returns:\n        float: Lot optimal",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "calculate_ema",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def calculate_ema(df, period):\n    \"\"\"Calcule l'EMA\"\"\"\n    ema = ta.ema(df['close'], length=period)\n    return ema\ndef calculate_donchian(df, period=DONCHIAN_PERIOD):\n    \"\"\"\n    Calcule le Canal de Donchian\n    Returns:\n        tuple: (upper_band, lower_band)\n    \"\"\"",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "calculate_donchian",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def calculate_donchian(df, period=DONCHIAN_PERIOD):\n    \"\"\"\n    Calcule le Canal de Donchian\n    Returns:\n        tuple: (upper_band, lower_band)\n    \"\"\"\n    upper_band = df['high'].rolling(window=period).max()\n    lower_band = df['low'].rolling(window=period).min()\n    return upper_band, lower_band\ndef calculate_adx(df, period=ADX_PERIOD):",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "calculate_adx",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def calculate_adx(df, period=ADX_PERIOD):\n    \"\"\"Calcule l'ADX\"\"\"\n    adx_data = ta.adx(df['high'], df['low'], df['close'], length=period)\n    if adx_data is None or adx_data.empty:\n        return None\n    # Retourne la colonne ADX\n    adx_col = [c for c in adx_data.columns if c.startswith('ADX')][0]\n    return adx_data[adx_col]\ndef calculate_rsi(df, period=RSI_PERIOD):\n    \"\"\"Calcule le RSI\"\"\"",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "calculate_rsi",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def calculate_rsi(df, period=RSI_PERIOD):\n    \"\"\"Calcule le RSI\"\"\"\n    rsi = ta.rsi(df['close'], length=period)\n    return rsi\ndef calculate_bollinger_bands(df, period=BB_PERIOD, std=BB_STD):\n    \"\"\"\n    Calcule les Bandes de Bollinger et le BBW (Bandwidth)\n    Returns:\n        dict: {'upper', 'middle', 'lower', 'bbw'}\n    \"\"\"",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "calculate_bollinger_bands",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def calculate_bollinger_bands(df, period=BB_PERIOD, std=BB_STD):\n    \"\"\"\n    Calcule les Bandes de Bollinger et le BBW (Bandwidth)\n    Returns:\n        dict: {'upper', 'middle', 'lower', 'bbw'}\n    \"\"\"\n    bb = ta.bbands(df['close'], length=period, std=std)\n    if bb is None or bb.empty:\n        return None\n    col_upper = [c for c in bb.columns if c.startswith('BBU')][0]",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "calculate_atr",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def calculate_atr(df, period=ATR_PERIOD):\n    \"\"\"Calcule l'ATR\"\"\"\n    atr = ta.atr(df['high'], df['low'], df['close'], length=period)\n    return atr\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n# D√âTECTION DU SQUEEZE\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\ndef detect_squeeze(df):\n    \"\"\"\n    D√©tecte si le march√© est en √©tat de Squeeze (compression)",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "detect_squeeze",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def detect_squeeze(df):\n    \"\"\"\n    D√©tecte si le march√© est en √©tat de Squeeze (compression)\n    Returns:\n        dict: {'is_squeeze': bool, 'multiplier': float}\n    \"\"\"\n    bb = calculate_bollinger_bands(df)\n    if bb is None:\n        return {'is_squeeze': False, 'multiplier': 1.0}\n    # Moyenne du BBW sur 30 p√©riodes",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "get_market_context_m5",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def get_market_context_m5(symbol):\n    \"\"\"\n    Filtre de Tendance M5 via EMA 50\n    Returns:\n        str: 'UP' / 'DOWN' / 'NEUTRAL'\n    \"\"\"\n    df_m5 = get_price_data(symbol, TIMEFRAME_M5, 100)\n    if df_m5.empty or len(df_m5) < EMA_M5_PERIOD + 5:\n        return 'NEUTRAL'\n    ema50 = calculate_ema(df_m5, EMA_M5_PERIOD)",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "check_m1_filters",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def check_m1_filters(symbol, signal_type):\n    \"\"\"\n    V√©rifie les filtres M1 :\n    - EMA 200 (King Filter)\n    - ADX > 20\n    - RSI > 55 (BUY) ou < 45 (SELL)\n    Returns:\n        bool: True si tous les filtres passent\n    \"\"\"\n    df_m1 = get_price_data(symbol, TIMEFRAME_M1, 250)",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "detect_ema_cross_and_donchian_break",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def detect_ema_cross_and_donchian_break(symbol):\n    \"\"\"\n    D√©tecte le signal TRIGGER :\n    - Croisement EMA 9 x EMA 21\n    - ET Cassure du Canal de Donchian\n    Returns:\n        dict or None: Signal avec type, entry, sl, tp, reason\n    \"\"\"\n    df_m1 = get_price_data(symbol, TIMEFRAME_M1, 100)\n    if df_m1.empty or len(df_m1) < max(EMA_M1_SLOW, DONCHIAN_PERIOD) + 5:",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "get_smart_signal",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def get_smart_signal(symbol):\n    \"\"\"\n    Signal Principal de la Strat√©gie\n    Combine tous les filtres et d√©tections\n    Returns:\n        dict or None: Signal complet si toutes les conditions sont remplies\n    \"\"\"\n    # √âTAPE 1 : Contexte M5 (Tendance globale)\n    context = get_market_context_m5(symbol)\n    if context == 'NEUTRAL':",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "prepare_trade_request",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def prepare_trade_request(symbol, signal):\n    \"\"\"\n    Pr√©pare la requ√™te de trade (compatible multi-comptes)\n    Returns:\n        tuple: (request_dict, lot, entry_price, tp1, tp2, tp3)\n    \"\"\"\n    tick = mt5.symbol_info_tick(symbol)\n    if not tick:\n        logging.error(f\"Impossible de r√©cup√©rer le tick pour {symbol}\")\n        return None, 0, 0, 0, 0, 0",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "open_trade",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def open_trade(symbol, signal):\n    \"\"\"\n    Ex√©cute un trade avec la nouvelle strat√©gie\n    Returns:\n        tuple: (ticket, lot)\n    \"\"\"\n    request, lot, entry_price, tp1, tp2, tp3 = prepare_trade_request(symbol, signal)\n    if request is None:\n        return None, 0\n    result = mt5.order_send(request)",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "update_chandelier_exit",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def update_chandelier_exit(symbol, ticket, lot, signal, account_number=None):\n    \"\"\"\n    Mise √† jour du Chandelier Exit (Trailing Stop bas√© sur ATR)\n    R√®gle :\n    - Pour un BUY : SL = Plus Haut atteint - (3 x ATR)\n    - Pour un SELL : SL = Plus Bas atteint + (3 x ATR)\n    - Le SL ne redescend JAMAIS (BUY) ou ne remonte JAMAIS (SELL)\n    \"\"\"\n    pos = mt5.positions_get(ticket=ticket)\n    if not pos:",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "modify_sl_tp",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def modify_sl_tp(symbol, ticket, new_sl, new_tp):\n    \"\"\"Modifie le SL et TP d'une position\"\"\"\n    request = {\n        \"action\": mt5.TRADE_ACTION_SLTP,\n        \"symbol\": symbol,\n        \"position\": ticket,\n        \"sl\": float(new_sl),\n        \"tp\": float(new_tp),\n        \"magic\": MAGIC_NUMBER,\n    }",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "monitor_active_trade",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def monitor_active_trade(symbol, ticket, lot, signal, account_number=None):\n    \"\"\"\n    Surveillance active du trade avec Chandelier Exit\n    Args:\n        symbol: Symbole trad√©\n        ticket: Num√©ro du ticket\n        lot: Volume du trade\n        signal: Dictionnaire du signal (contient tp1, tp2, tp3)\n        account_number: Num√©ro de compte (pour multi-comptes)\n    \"\"\"",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "is_volatility_good",
        "kind": 2,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "def is_volatility_good(symbol):\n    \"\"\"\n    V√©rifie si l'indice est assez volatil pour √™tre trad√©\n    Returns:\n        tuple: (bool, str) - (OK ou pas, Raison)\n    \"\"\"\n    df = get_price_data(symbol, mt5.TIMEFRAME_H1, 50)\n    if df.empty:\n        return False, \"Pas de donn√©es\"\n    atr = calculate_atr(df, 14)",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "TIMEFRAME_M5",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "TIMEFRAME_M5 = mt5.TIMEFRAME_M5\nTIMEFRAME_M1 = mt5.TIMEFRAME_M1\n# Indicateurs M5 (Contexte)\nEMA_M5_PERIOD = 50\n# Indicateurs M1 (Ex√©cution)\nEMA_M1_KING = 200      # King Filter\nEMA_M1_FAST = 9        # Signal rapide\nEMA_M1_SLOW = 21       # Signal lent\n# Donchian Channel\nDONCHIAN_PERIOD = 20",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "TIMEFRAME_M1",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "TIMEFRAME_M1 = mt5.TIMEFRAME_M1\n# Indicateurs M5 (Contexte)\nEMA_M5_PERIOD = 50\n# Indicateurs M1 (Ex√©cution)\nEMA_M1_KING = 200      # King Filter\nEMA_M1_FAST = 9        # Signal rapide\nEMA_M1_SLOW = 21       # Signal lent\n# Donchian Channel\nDONCHIAN_PERIOD = 20\n# ADX (Puissance)",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "EMA_M5_PERIOD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "EMA_M5_PERIOD = 50\n# Indicateurs M1 (Ex√©cution)\nEMA_M1_KING = 200      # King Filter\nEMA_M1_FAST = 9        # Signal rapide\nEMA_M1_SLOW = 21       # Signal lent\n# Donchian Channel\nDONCHIAN_PERIOD = 20\n# ADX (Puissance)\nADX_PERIOD = 14\nADX_THRESHOLD = 20",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "EMA_M1_KING",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "EMA_M1_KING = 200      # King Filter\nEMA_M1_FAST = 9        # Signal rapide\nEMA_M1_SLOW = 21       # Signal lent\n# Donchian Channel\nDONCHIAN_PERIOD = 20\n# ADX (Puissance)\nADX_PERIOD = 14\nADX_THRESHOLD = 20\n# RSI (Momentum)\nRSI_PERIOD = 14",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "EMA_M1_FAST",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "EMA_M1_FAST = 9        # Signal rapide\nEMA_M1_SLOW = 21       # Signal lent\n# Donchian Channel\nDONCHIAN_PERIOD = 20\n# ADX (Puissance)\nADX_PERIOD = 14\nADX_THRESHOLD = 20\n# RSI (Momentum)\nRSI_PERIOD = 14\nRSI_BUY_THRESHOLD = 55",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "EMA_M1_SLOW",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "EMA_M1_SLOW = 21       # Signal lent\n# Donchian Channel\nDONCHIAN_PERIOD = 20\n# ADX (Puissance)\nADX_PERIOD = 14\nADX_THRESHOLD = 20\n# RSI (Momentum)\nRSI_PERIOD = 14\nRSI_BUY_THRESHOLD = 55\nRSI_SELL_THRESHOLD = 45",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "DONCHIAN_PERIOD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "DONCHIAN_PERIOD = 20\n# ADX (Puissance)\nADX_PERIOD = 14\nADX_THRESHOLD = 20\n# RSI (Momentum)\nRSI_PERIOD = 14\nRSI_BUY_THRESHOLD = 55\nRSI_SELL_THRESHOLD = 45\n# Bollinger Bands (Squeeze Detection)\nBB_PERIOD = 20",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "ADX_PERIOD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "ADX_PERIOD = 14\nADX_THRESHOLD = 20\n# RSI (Momentum)\nRSI_PERIOD = 14\nRSI_BUY_THRESHOLD = 55\nRSI_SELL_THRESHOLD = 45\n# Bollinger Bands (Squeeze Detection)\nBB_PERIOD = 20\nBB_STD = 2\n# ATR (Chandelier Exit)",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "ADX_THRESHOLD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "ADX_THRESHOLD = 20\n# RSI (Momentum)\nRSI_PERIOD = 14\nRSI_BUY_THRESHOLD = 55\nRSI_SELL_THRESHOLD = 45\n# Bollinger Bands (Squeeze Detection)\nBB_PERIOD = 20\nBB_STD = 2\n# ATR (Chandelier Exit)\nATR_PERIOD = 14",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "RSI_PERIOD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "RSI_PERIOD = 14\nRSI_BUY_THRESHOLD = 55\nRSI_SELL_THRESHOLD = 45\n# Bollinger Bands (Squeeze Detection)\nBB_PERIOD = 20\nBB_STD = 2\n# ATR (Chandelier Exit)\nATR_PERIOD = 14\nATR_MULTIPLIER = 3.0    # Distance du Trailing Stop\n# Money Management",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "RSI_BUY_THRESHOLD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "RSI_BUY_THRESHOLD = 55\nRSI_SELL_THRESHOLD = 45\n# Bollinger Bands (Squeeze Detection)\nBB_PERIOD = 20\nBB_STD = 2\n# ATR (Chandelier Exit)\nATR_PERIOD = 14\nATR_MULTIPLIER = 3.0    # Distance du Trailing Stop\n# Money Management\nRISK_PER_TRADE = 0.01   # 1% du capital par trade",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "RSI_SELL_THRESHOLD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "RSI_SELL_THRESHOLD = 45\n# Bollinger Bands (Squeeze Detection)\nBB_PERIOD = 20\nBB_STD = 2\n# ATR (Chandelier Exit)\nATR_PERIOD = 14\nATR_MULTIPLIER = 3.0    # Distance du Trailing Stop\n# Money Management\nRISK_PER_TRADE = 0.01   # 1% du capital par trade\nSQUEEZE_SIZE_MULTIPLIER = 1.5  # Multiplie la taille si squeeze d√©tect√©",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "BB_PERIOD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "BB_PERIOD = 20\nBB_STD = 2\n# ATR (Chandelier Exit)\nATR_PERIOD = 14\nATR_MULTIPLIER = 3.0    # Distance du Trailing Stop\n# Money Management\nRISK_PER_TRADE = 0.01   # 1% du capital par trade\nSQUEEZE_SIZE_MULTIPLIER = 1.5  # Multiplie la taille si squeeze d√©tect√©\nEXPANSION_SIZE_MULTIPLIER = 0.5  # R√©duit la taille si expansion d√©j√† faite\n# Seuils Squeeze",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "BB_STD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "BB_STD = 2\n# ATR (Chandelier Exit)\nATR_PERIOD = 14\nATR_MULTIPLIER = 3.0    # Distance du Trailing Stop\n# Money Management\nRISK_PER_TRADE = 0.01   # 1% du capital par trade\nSQUEEZE_SIZE_MULTIPLIER = 1.5  # Multiplie la taille si squeeze d√©tect√©\nEXPANSION_SIZE_MULTIPLIER = 0.5  # R√©duit la taille si expansion d√©j√† faite\n# Seuils Squeeze\nSQUEEZE_THRESHOLD = 0.85  # BBW < 85% de la moyenne = Squeeze",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "ATR_PERIOD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "ATR_PERIOD = 14\nATR_MULTIPLIER = 3.0    # Distance du Trailing Stop\n# Money Management\nRISK_PER_TRADE = 0.01   # 1% du capital par trade\nSQUEEZE_SIZE_MULTIPLIER = 1.5  # Multiplie la taille si squeeze d√©tect√©\nEXPANSION_SIZE_MULTIPLIER = 0.5  # R√©duit la taille si expansion d√©j√† faite\n# Seuils Squeeze\nSQUEEZE_THRESHOLD = 0.85  # BBW < 85% de la moyenne = Squeeze\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n# FONCTIONS UTILITAIRES",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "ATR_MULTIPLIER",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "ATR_MULTIPLIER = 3.0    # Distance du Trailing Stop\n# Money Management\nRISK_PER_TRADE = 0.01   # 1% du capital par trade\nSQUEEZE_SIZE_MULTIPLIER = 1.5  # Multiplie la taille si squeeze d√©tect√©\nEXPANSION_SIZE_MULTIPLIER = 0.5  # R√©duit la taille si expansion d√©j√† faite\n# Seuils Squeeze\nSQUEEZE_THRESHOLD = 0.85  # BBW < 85% de la moyenne = Squeeze\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n# FONCTIONS UTILITAIRES\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "RISK_PER_TRADE",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "RISK_PER_TRADE = 0.01   # 1% du capital par trade\nSQUEEZE_SIZE_MULTIPLIER = 1.5  # Multiplie la taille si squeeze d√©tect√©\nEXPANSION_SIZE_MULTIPLIER = 0.5  # R√©duit la taille si expansion d√©j√† faite\n# Seuils Squeeze\nSQUEEZE_THRESHOLD = 0.85  # BBW < 85% de la moyenne = Squeeze\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n# FONCTIONS UTILITAIRES\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\ndef get_price_data(symbol, timeframe, bars=500):\n    \"\"\"R√©cup√®re les donn√©es de prix\"\"\"",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "SQUEEZE_SIZE_MULTIPLIER",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "SQUEEZE_SIZE_MULTIPLIER = 1.5  # Multiplie la taille si squeeze d√©tect√©\nEXPANSION_SIZE_MULTIPLIER = 0.5  # R√©duit la taille si expansion d√©j√† faite\n# Seuils Squeeze\nSQUEEZE_THRESHOLD = 0.85  # BBW < 85% de la moyenne = Squeeze\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n# FONCTIONS UTILITAIRES\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\ndef get_price_data(symbol, timeframe, bars=500):\n    \"\"\"R√©cup√®re les donn√©es de prix\"\"\"\n    try:",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "EXPANSION_SIZE_MULTIPLIER",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "EXPANSION_SIZE_MULTIPLIER = 0.5  # R√©duit la taille si expansion d√©j√† faite\n# Seuils Squeeze\nSQUEEZE_THRESHOLD = 0.85  # BBW < 85% de la moyenne = Squeeze\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n# FONCTIONS UTILITAIRES\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\ndef get_price_data(symbol, timeframe, bars=500):\n    \"\"\"R√©cup√®re les donn√©es de prix\"\"\"\n    try:\n        rates = mt5.copy_rates_from_pos(symbol, timeframe, 0, bars)",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "SQUEEZE_THRESHOLD",
        "kind": 5,
        "importPath": "strategy",
        "description": "strategy",
        "peekOfCode": "SQUEEZE_THRESHOLD = 0.85  # BBW < 85% de la moyenne = Squeeze\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n# FONCTIONS UTILITAIRES\n# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\ndef get_price_data(symbol, timeframe, bars=500):\n    \"\"\"R√©cup√®re les donn√©es de prix\"\"\"\n    try:\n        rates = mt5.copy_rates_from_pos(symbol, timeframe, 0, bars)\n        if rates is None or len(rates) == 0:\n            return pd.DataFrame()",
        "detail": "strategy",
        "documentation": {}
    },
    {
        "label": "sync_account",
        "kind": 2,
        "importPath": "sync_history",
        "description": "sync_history",
        "peekOfCode": "def sync_account(account_config, days=30):\n    \"\"\"Synchronise l'historique d'un compte sp√©cifique\"\"\"\n    logging.info(f\"üîÑ Synchronisation compte {account_config.name} ({account_config.account_number})...\")\n    # 1. Connexion MT5\n    if not mt5.initialize():\n        logging.error(\"‚ùå Erreur init MT5\")\n        return\n    authorized = mt5.login(\n        account_config.account_number, \n        password=account_config.password, ",
        "detail": "sync_history",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "sync_history",
        "description": "sync_history",
        "peekOfCode": "def main():\n    print(\"=== SYNCHRONISATION DU JOURNAL DE TRADING ===\")\n    print(\"Ce script va parcourir tous les comptes configur√©s et mettre √† jour la base de donn√©es.\")\n    print(\"‚ö†Ô∏è Assurez-vous que le Bot n'est pas en train de trader activement (risque de d√©connexion).\")\n    confirm = input(\"Tapez 'O' pour continuer : \")\n    if confirm.lower() != 'o':\n        print(\"Annul√©.\")\n        return\n    for account in ACCOUNTS:\n        if account.enabled:",
        "detail": "sync_history",
        "documentation": {}
    },
    {
        "label": "modules_required",
        "kind": 5,
        "importPath": "test_installation",
        "description": "test_installation",
        "peekOfCode": "modules_required = [\n    \"MetaTrader5\",\n    \"pandas\",\n    \"pandas_ta\",\n    \"numpy\",\n    \"pymongo\",\n    \"python-dotenv\",\n    \"telegram\",\n    \"streamlit\",\n]",
        "detail": "test_installation",
        "documentation": {}
    },
    {
        "label": "missing_modules",
        "kind": 5,
        "importPath": "test_installation",
        "description": "test_installation",
        "peekOfCode": "missing_modules = []\nfor module_name in modules_required:\n    try:\n        if module_name == \"python-dotenv\":\n            import dotenv\n            print(f\"  ‚úÖ {module_name}\")\n        elif module_name == \"MetaTrader5\":\n            import MetaTrader5 as mt5\n            print(f\"  ‚úÖ {module_name}\")\n        elif module_name == \"pandas_ta\":",
        "detail": "test_installation",
        "documentation": {}
    },
    {
        "label": "required_files",
        "kind": 5,
        "importPath": "test_installation",
        "description": "test_installation",
        "peekOfCode": "required_files = [\n    \"main.py\",\n    \"strategy.py\",\n    \"config.py\",\n    \"connexion.py\",\n    \"database.py\",\n    \"utils.py\",\n    \"multi_account.py\",\n    \"accounts_config.py\",\n    \"requirements.txt\",",
        "detail": "test_installation",
        "documentation": {}
    },
    {
        "label": "setup_logging",
        "kind": 2,
        "importPath": "utils",
        "description": "utils",
        "peekOfCode": "def setup_logging(\n    level=logging.INFO,\n    console_level=logging.INFO,      # niveau pour la console (peut √™tre plus verbeux)\n    file_level=logging.DEBUG,        # niveau pour le fichier (plus d√©taill√©)\n    log_dir=\"logs\"\n):\n    \"\"\"\n    Configure le logging :\n      - Console : INFO ou DEBUG selon besoin (imm√©diatement visible)\n      - Fichier : un log par jour avec niveau DEBUG (tout est trac√©)",
        "detail": "utils",
        "documentation": {}
    },
    {
        "label": "send_telegram_alert",
        "kind": 2,
        "importPath": "utils",
        "description": "utils",
        "peekOfCode": "def send_telegram_alert(message: str, force=True):\n    \"\"\"Envoie alerte Telegram seulement pour √©v√©nements cl√©s (launch, close bot, open/close position)\"\"\"\n    if not TELEGRAM_TOKEN or not TELEGRAM_CHAT_ID:\n        logging.warning(\"Config Telegram manquante\")\n        return\n    try:\n        bot = Bot(token=TELEGRAM_TOKEN)\n        asyncio.run(bot.send_message(chat_id=TELEGRAM_CHAT_ID, text=message.strip(), parse_mode=\"HTML\"))\n    except Exception as e:\n        logging.error(f\"√âchec Telegram : {e}\")",
        "detail": "utils",
        "documentation": {}
    }
]